{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8f1eeb67aea26bd1d883","webpack:///./src/utils.js","webpack:///external \"buffer\"","webpack:///./src/index.js","webpack:///./src/cache.js","webpack:///./src/event-emitter.js","webpack:///./src/qs.js","webpack:///external \"stream\"","webpack:///external \"url\"","webpack:///external \"https\"","webpack:///external \"http\"","webpack:///external \"form-data\""],"names":["castArray","Array","isArray","value","isObject","isFormData","constructor","toString","trim","indexOf","isStream","stream","require","Stream","qs","CONTENT_TYPE_HEADER","CACHE_FLUSH_INTERVAL","cache","Cache","ResponseError","response","error","parseError","message","code","status","headers","body","Error","res","statusText","parseBody","JSON","parse","e","parseHeaders","headersString","parsed","split","forEach","i","line","key","substr","val","sendXmlHttpRequest","path","method","encoding","timeout","Promise","sendRequest","resolve","reject","request","Request","XMLHttpRequest","responseType","open","toUpperCase","onload","handleLoadEvent","getAllResponseHeaders","result","responseText","Uint8Array","onerror","handleErrorEvent","ontimeout","handleTimeout","Object","keys","setRequestHeader","send","sendNodeAPIRequest","u","form","https","protocol","options","host","hostname","port","_send","Buffer","httpClient","req","strings","buffers","bufferLength","statusCode","statusMessage","on","isBuffer","chunk","push","length","concat","join","destroy","pipe","write","end","getHeaders","getLength","err","isNaN","byteLength","checkStatus","REQUEST_EVENT","RESPONSE_EVENT","ERROR_EVENT","DONE_EVENT","tags","undefined","unwrap","cacheTTL","queryParams","headerName","set","FormData","module","exports","formData","formKey","formValue","hasOwnProperty","append","ttl","reset","deleteByTags","contentType","ms","emit","queryString","stringify","cached","get","type","isJSON","unwrapBody","cacheResponse","flushCache","verbose","console","log","decodeURIComponent","then","catch","successHandler","errorHandler","promise","EventEmitter","defineProperty","sender","methods","DEFAULT_TTL","cacheItem","currentTime","Date","getTime","tagsMatches","a","b","RegExp","test","tagsContainMatches","find","aTag","bTag","flushInterval","map","Map","delete","flushTimer","setInterval","flush","bind","unref","now","events","eventName","callback","filter","c","args","tokens","obj","encodeURIComponent"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;;;;;;;;;;;;;;;;AC7DA;;;;AAIO,IAAMA,gCAAY,SAAZA,SAAY,QAAS;AAChC,SAAOC,MAAMC,OAAN,CAAcC,KAAd,IAAuBA,KAAvB,GAA+B,CAACA,KAAD,CAAtC;AACD,CAFM;;AAIA,IAAMC,8BAAW,SAAXA,QAAW;AAAA,SAAS,QAAQD,KAAR,IAAiB,QAAOA,KAAP,yCAAOA,KAAP,OAAiB,QAA3C;AAAA,CAAjB;;AAEA,IAAME,kCAAa,SAAbA,UAAa,QAAS;AACjC,SAAOF,SAASA,MAAMG,WAAf,IAA8BH,MAAMG,WAAN,CAAkBC,QAAlB,GAA6BC,IAA7B,GAAoCC,OAApC,CAA4C,mBAA5C,MAAqE,CAA1G;AACD,CAFM;;AAIA,IAAMC,8BAAW,SAAXA,QAAW,QAAS;AAC/B,MAAMC,SAASC,mBAAOA,CAAC,CAAR,CAAf;;AAEA,SAAOT,iBAAiBQ,OAAOE,MAA/B;AACD,CAJM,C;;;;;;ACdP,gN;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;IAAYC,E;;AACZ;;;;;;;;;;;;AAEA,IAAMC,sBAAsB,cAA5B;AACA,IAAMC,uBAAuB,KAA7B,C,CAAmC;;AAEnC,IAAMC,QAAQ,IAAIC,eAAJ,CAAUF,oBAAV,CAAd;;IAEMG,a;;;AACJ,yBAAYC,QAAZ,EAAsB;AAAA;;AAAA;;AAGpB,QAAMC,QAAQC,WAAWF,QAAX,CAAd;;AAEA,UAAKG,OAAL,GAAeF,MAAME,OAAN,IAAiBF,KAAhC;AACA,UAAKG,IAAL,GAAYH,MAAMG,IAAlB;;AAEA,UAAKC,MAAL,GAAcL,SAASK,MAAvB;AACA,UAAKC,OAAL,GAAeN,SAASM,OAAxB;AACA,UAAKC,IAAL,GAAYP,SAASO,IAArB;AAVoB;AAWrB;;;EAZyBC,K;;AAe5B,SAASN,UAAT,CAAoBO,GAApB,EAAyB;AACvB,MAAIA,IAAIJ,MAAJ,KAAe,GAAnB,EAAwB;AACtB,WAAO,2BAAP;AACD;;AAED,SAAOI,IAAIF,IAAJ,qBAA2BE,IAAIJ,MAA/B,UAA0CI,IAAIC,UAA9C,MAAP;AACD;;AAED,SAASC,SAAT,CAAmBF,GAAnB,EAAwB;AACtB,MAAI;AACF,wBAAYA,GAAZ,IAAiBF,MAAMK,KAAKC,KAAL,CAAWJ,IAAIF,IAAf,CAAvB;AACD,GAFD,CAEE,OAAOO,CAAP,EAAU;AACV,WAAOL,GAAP;AACD;AACF;;AAED,SAASM,YAAT,CAAsBC,aAAtB,EAAqC;AACnC,MAAMC,SAAS,EAAf;;AAEA,MAAI,CAACD,aAAL,EAAoB;AAClB,WAAOC,MAAP;AACD;;AAEDD,gBAAcE,KAAd,CAAoB,IAApB,EAA0BC,OAA1B,CAAkC,gBAAQ;AACxC,QAAMC,IAAIC,KAAKhC,OAAL,CAAa,GAAb,CAAV;AACA,QAAMiC,MAAMD,KAAKE,MAAL,CAAY,CAAZ,EAAeH,CAAf,EAAkBhC,IAAlB,EAAZ;AACA,QAAMoC,MAAMH,KAAKE,MAAL,CAAYH,IAAI,CAAhB,EAAmBhC,IAAnB,EAAZ;;AAEA,QAAIkC,GAAJ,EAAS;AACPL,aAAOK,GAAP,IAAcL,OAAOK,GAAP,IAAcL,OAAOK,GAAP,IAAc,IAAd,GAAqBE,GAAnC,GAAyCA,GAAvD;AACD;AACF,GARD;;AAUA,SAAOP,MAAP;AACD;;AAED,IAAMQ,qBAAqB,SAArBA,kBAAqB,CAACC,IAAD,EAAOC,MAAP,EAAerB,OAAf,EAAwBC,IAAxB,EAA8BqB,QAA9B,EAAwCC,OAAxC,EAAoD;AAC7E,SAAO,IAAIC,OAAJ,CAAY,SAASC,WAAT,CAAqBC,OAArB,EAA8BC,MAA9B,EAAsC;AACvD,QAAIC,UAAU,IAAIC,QAAQC,cAAZ,EAAd;;AAEAF,YAAQL,OAAR,GAAkBA,OAAlB;;AAEA,QAAI,CAACD,QAAL,EAAe;AACbM,cAAQG,YAAR,GAAuB,aAAvB;AACD;;AAEDH,YAAQI,IAAR,CAAaX,OAAOY,WAAP,EAAb,EAAmCb,IAAnC,EAAyC,IAAzC;;AAEAQ,YAAQM,MAAR,GAAiB,SAASC,eAAT,GAA2B;AAC1C,UAAMnC,UAAUS,aAAamB,QAAQQ,qBAAR,EAAb,CAAhB;AAD0C,qBAEXR,OAFW;AAAA,UAElC7B,MAFkC,YAElCA,MAFkC;AAAA,UAE1BK,UAF0B,YAE1BA,UAF0B;;;AAI1C,UAAMiC,SAAS,EAAEtC,cAAF,EAAUK,sBAAV,EAAsBJ,gBAAtB,EAAf;;AAEA,UAAIsB,aAAa,MAAjB,EAAyB;AACvBe,eAAOpC,IAAP,GAAc2B,QAAQlC,QAAR,IAAoBkC,QAAQU,YAA1C;AACD,OAFD,MAEO,IAAIV,QAAQlC,QAAZ,EAAsB;AAC3B2C,eAAOpC,IAAP,GAAc,IAAIsC,UAAJ,CAAeX,QAAQlC,QAAvB,CAAd;AACD;;AAEDgC,cAAQW,MAAR;;AAEAT,gBAAU,IAAV;AACD,KAfD;;AAiBAA,YAAQY,OAAR,GAAkB,SAASC,gBAAT,GAA4B;AAC5Cd,aAAO,IAAIzB,KAAJ,CAAU,eAAV,CAAP;;AAEA0B,gBAAU,IAAV;AACD,KAJD;;AAMAA,YAAQc,SAAR,GAAoB,SAASC,aAAT,GAAyB;AAC3ChB,aAAO,IAAIzB,KAAJ,CAAU,mCAAV,CAAP;;AAEA0B,gBAAU,IAAV;AACD,KAJD;;AAMAgB,WAAOC,IAAP,CAAY7C,OAAZ,EAAqBa,OAArB,CAA6B,eAAO;AAClCe,cAAQkB,gBAAR,CAAyB9B,GAAzB,EAA8BhB,QAAQgB,GAAR,CAA9B;AACD,KAFD;;AAIAY,YAAQmB,IAAR,CAAa9C,IAAb;AACD,GA7CM,CAAP;AA8CD,CA/CD;;AAiDA,IAAM+C,qBAAqB,SAArBA,kBAAqB,CAAC5B,IAAD,EAAOC,MAAP,EAAerB,OAAf,EAAwBC,IAAxB,EAA8BqB,QAA9B,EAAwCC,OAAxC,EAAoD;AAC7E,SAAO,IAAIC,OAAJ,CAAY,UAACE,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAMsB,IAAI/D,mBAAOA,CAAC,CAAR,EAAeqB,KAAf,CAAqBa,IAArB,CAAV;AACA,QAAM8B,OAAO,uBAAWjD,IAAX,KAAoBA,IAAjC;;AAEA,QAAMkD,QAAQF,EAAEG,QAAF,KAAe,QAA7B;AACA,QAAMC,UAAU;AACdC,YAAML,EAAEM,QADM;AAEdC,YAAMP,EAAEO,IAAF,KAAWL,QAAQ,GAAR,GAAc,EAAzB,CAFQ;AAGd/B,YAAM6B,EAAE7B,IAHM;AAIdC,oBAJc;AAKdrB,sBALc;AAMduB;AANc,KAAhB;;AASA,QAAMkC,QAAQ,SAARA,KAAQ,GAAM;AAClB,UAAMC,SAASxE,mBAAOA,CAAC,CAAR,EAAkBwE,MAAjC;AACA,UAAMC,aAAazE,mBAAOA,CAACiE,QAAQ,CAAR,GAAkB,CAA1B,CAAnB;;AAEA,UAAMS,MAAMD,WAAW/B,OAAX,CAAmByB,OAAnB,EAA4B,eAAO;AAC7C,YAAMQ,UAAU,EAAhB;AACA,YAAMC,UAAU,EAAhB;AACA,YAAIC,eAAe,CAAnB;AACA,YAAI9D,OAAO,EAAX;;AAJ6C,YAMzBF,MANyB,GAMsBI,GANtB,CAMrC6D,UANqC;AAAA,YAMF5D,UANE,GAMsBD,GANtB,CAMjB8D,aANiB;AAAA,YAMUjE,OANV,GAMsBG,GANtB,CAMUH,OANV;;;AAQ7CG,YAAI+D,EAAJ,CAAO,MAAP,EAAe,iBAAS;AACtB,cAAI,CAACR,OAAOS,QAAP,CAAgBC,KAAhB,CAAL,EAA6B;AAC3BP,oBAAQQ,IAAR,CAAaD,KAAb;AAED,WAHD,MAGO,IAAIA,MAAME,MAAV,EAAkB;AACvBP,4BAAgBK,MAAME,MAAtB;AACAR,oBAAQO,IAAR,CAAaD,KAAb;AACD;AACF,SARD;;AAUAjE,YAAI+D,EAAJ,CAAO,KAAP,EAAc,YAAM;AAClB,cAAIH,YAAJ,EAAkB;AAChB9D,mBAAOyD,OAAOa,MAAP,CAAcT,OAAd,EAAuBC,YAAvB,CAAP;;AAEA,gBAAIzC,YAAY,IAAhB,EAAsB;AACpBrB,qBAAOA,KAAKpB,QAAL,CAAcyC,QAAd,CAAP;AACD;AAEF,WAPD,MAOO,IAAIuC,QAAQS,MAAZ,EAAoB;AACzBrE,mBAAO4D,QAAQW,IAAR,EAAP;AACD;;AAED9C,kBAAQ,EAAE3B,cAAF,EAAUK,sBAAV,EAAsBJ,gBAAtB,EAA+BC,UAA/B,EAAR;AACD,SAbD;;AAeAE,YAAI+D,EAAJ,CAAO,OAAP,EAAgBvC,MAAhB;AACD,OAlCW,CAAZ;;AAoCAiC,UAAIM,EAAJ,CAAO,OAAP,EAAgBvC,MAAhB;;AAEAiC,UAAIM,EAAJ,CAAO,SAAP,EAAkB,YAAM;AACtBN,YAAIa,OAAJ,CAAY,IAAIvE,KAAJ,CAAU,mCAAV,CAAZ;AACD,OAFD;;AAIA,UAAID,IAAJ,EAAU;AACR,YAAI,qBAASA,IAAT,CAAJ,EAAoB;AAClBA,eAAKyE,IAAL,CAAUd,GAAV;AACA;AACD;;AAEDA,YAAIe,KAAJ,CAAU1E,IAAV;AACD;;AAED2D,UAAIgB,GAAJ;AACD,KAxDD;;AA0DA,QAAI1B,IAAJ,EAAU;AACR,eAAcG,QAAQrD,OAAtB,EAA+BkD,KAAK2B,UAAL,EAA/B;;AAEA3B,WAAK4B,SAAL,CAAe,UAASC,GAAT,EAAcT,MAAd,EAAsB;AACnC,YAAI,CAACS,GAAD,IAAQ,CAACC,MAAMV,MAAN,CAAb,EAA4B;AAC1BjB,kBAAQrD,OAAR,CAAgB,gBAAhB,IAAoCsE,MAApC;AACD;;AAEDb;AACD,OAND;AAOD,KAVD,MAUO;AACL,UAAIxD,QAAQ,CAACoD,QAAQrD,OAAR,CAAgB,gBAAhB,CAAb,EAAgD;AAC9C,YAAM0D,SAASxE,mBAAOA,CAAC,CAAR,EAAkBwE,MAAjC;AACAL,gBAAQrD,OAAR,CAAgB,gBAAhB,IAAoC0D,OAAOuB,UAAP,CAAkBhF,IAAlB,CAApC;AACD;;AAEDwD;AACD;AACF,GA1FM,CAAP;AA2FD,CA5FD;;AA8FA;;;;;;;AAOA,SAASyB,WAAT,CAAqBxF,QAArB,EAA+B;AAC7B,MAAIA,SAASK,MAAT,IAAmB,GAAnB,IAA0BL,SAASK,MAAT,GAAkB,GAAhD,EAAqD;AACnD,WAAOL,QAAP;AACD;;AAED,QAAM,IAAID,aAAJ,CAAkBC,QAAlB,CAAN;AACD;;AAED,IAAMyF,gBAAgB,SAAtB;AACA,IAAMC,iBAAiB,UAAvB;AACA,IAAMC,cAAc,OAApB;AACA,IAAMC,aAAa,MAAnB;;IAEMzD,O;;;AAEJ,mBAAYT,IAAZ,EAAkBC,MAAlB,EAA0BpB,IAA1B,EAAgC;AAAA;;AAAA;;AAG9B,WAAKoB,MAAL,GAAcA,MAAd;AACA,WAAKD,IAAL,GAAYA,IAAZ;AACA,WAAKnB,IAAL,GAAYA,IAAZ;AACA,WAAKsF,IAAL,GAAYC,SAAZ;AACA,WAAKC,MAAL,GAAc,IAAd;AACA,WAAKC,QAAL,GAAgB,CAAhB;AACA,WAAK1F,OAAL,GAAe,EAAf;AACA,WAAK2F,WAAL,GAAmB,EAAnB;AACA,WAAKrE,QAAL,GAAgB,MAAhB;AACA,WAAKC,OAAL,GAAe,CAAf;AAZ8B;AAa/B;;AAED;;;;;;;;;;;wBAOIP,G,EAAKvC,K,EAAO;AACd,UAAI,qBAASuC,GAAT,CAAJ,EAAmB;AACjB,aAAK,IAAM4E,UAAX,IAAyB5E,GAAzB,EAA8B;AAC5B,eAAK6E,GAAL,CAASD,UAAT,EAAqB5E,IAAI4E,UAAJ,CAArB;AACD;AACF,OAJD,MAIO,IAAI,OAAOnH,KAAP,KAAiB,WAArB,EAAkC;AACvC,aAAKuB,OAAL,CAAagB,GAAb,IAAoBvC,KAApB;AACD;;AAED,aAAO,IAAP;AACD;;AAED;;;;;;;;;;;gCAQmB;AAAA,wCAAN8G,IAAM;AAANA,YAAM;AAAA;;AACjB,WAAKA,IAAL,GAAYA,IAAZ;;AAEA,aAAO,IAAP;AACD;;AAED;;;;;;;0BAIMI,W,EAAa;AACjB,eAAc,KAAKA,WAAnB,EAAgCA,WAAhC;;AAEA,aAAO,IAAP;AACD;;;yBAEIzC,K,EAAM;AAAA;;AACT,UAAIA,KAAJ,EAAU;AACR,YAAM4C,YAAWC,OAAOC,OAAP,CAAeF,QAAhC;;AAEA,YAAI5C,iBAAgB4C,SAApB,EAA8B;AAC5B,eAAK7F,IAAL,GAAYiD,KAAZ;AACD,SAFD,MAEO;AAAA;AACL,gBAAM+C,WAAW,IAAIH,SAAJ,EAAjB;;AADK,uCAGMI,OAHN;AAIH,kBAAIA,OAAJ,EAAa;AACX,sCAAUhD,MAAKgD,OAAL,CAAV,EAAyBrF,OAAzB,CAAiC,qBAAa;AAC5C,sBAAIsF,aAAaA,UAAUC,cAAV,CAAyB,OAAzB,CAAb,IAAkDD,UAAUC,cAAV,CAAyB,SAAzB,CAAtD,EAA2F;AACzFH,6BAASI,MAAT,CAAgBH,OAAhB,EAAyBC,UAAU1H,KAAnC,EAA0C0H,UAAU9C,OAApD;AACD,mBAFD,MAEO;AACL4C,6BAASI,MAAT,CAAgBH,OAAhB,EAAyBC,SAAzB;AACD;AACF,iBAND;AAOD;AAZE;;AAGL,iBAAK,IAAMD,OAAX,IAAsBhD,KAAtB,EAA4B;AAAA,oBAAjBgD,OAAiB;AAU3B;;AAED,mBAAKjG,IAAL,GAAYgG,QAAZ;AAfK;AAgBN;AACF;;AAED,aAAO,IAAP;AACD;;AAED;;;;;;;;;+BAMsB;AAAA,UAAbK,GAAa,uEAAP,KAAO;;AACpB,WAAKZ,QAAL,GAAgBY,GAAhB;;AAEA,aAAO,IAAP;AACD;;AAED;;;;;;;;;+BAMWC,K,EAAO;AAChB,UAAIA,SAAS,KAAKhB,IAAlB,EAAwB;AACtBhG,cAAMiH,YAAN,CAAmB,KAAKjB,IAAxB;AACD;;AAED,aAAO,IAAP;AACD;;AAED;;;;;;;;;yBAMKkB,W,EAAa;AAChB,WAAKZ,GAAL,CAASxG,mBAAT,EAA8BoH,WAA9B;;AAEA,aAAO,IAAP;AACD;;AAED;;;;;;;;+BAKWhB,M,EAAQ;AACjB,WAAKA,MAAL,GAAcA,MAAd;;AAEA,aAAO,IAAP;AACD;;AAED;;;;;;;;;;gCAOYnE,Q,EAAU;AACpB,WAAKA,QAAL,GAAgBA,QAAhB;;AAEA,aAAO,IAAP;AACD;;AAED;;;;;;;;+BAKWoF,E,EAAI;AACb,WAAKnF,OAAL,GAAemF,EAAf;;AAEA,aAAO,IAAP;AACD;;AAED;;;;;;;;;yBAMKzG,I,EAAM;AAAA;;AACT,WAAK0G,IAAL,CAAUxB,aAAV,EAAyB,IAAzB;;AAEA,UAAI/D,OAAO,KAAKA,IAAhB;AACA,UAAMwF,cAAcxH,GAAGyH,SAAH,CAAa,KAAKlB,WAAlB,CAApB;;AAEA,UAAIiB,WAAJ,EAAiB;AACfxF,gBAAQ,MAAMwF,WAAd;AACD;;AAED,UAAI,KAAKlB,QAAT,EAAmB;AACjB,YAAMoB,SAASvH,MAAMwH,GAAN,CAAU3F,IAAV,CAAf;;AAEA,YAAI0F,WAAWtB,SAAf,EAA0B;AACxB,iBAAOhE,QAAQE,OAAR,CAAgBoF,MAAhB,CAAP;AACD;AACF;;AAED,UAAME,OAAO,KAAKhH,OAAL,CAAaX,mBAAb,CAAb;;AAEA,UAAI,CAAC2H,IAAD,IAAS,qBAAS/G,IAAT,CAAT,IAA2B,CAAC,uBAAWA,IAAX,CAAhC,EAAkD;AAChD,aAAK+G,IAAL,CAAU,kBAAV;AACD;;AAED,UAAI/G,IAAJ,EAAU;AACR,YAAMgH,SAAS,KAAKjH,OAAL,CAAaX,mBAAb,MAAsC,kBAArD;;AAEAY,eAAQgH,UAAU,OAAOhH,IAAP,KAAgB,QAA3B,GAAuCK,KAAKuG,SAAL,CAAe5G,IAAf,CAAvC,GAA8DA,IAArE;AACD;;AAED,UAAMiH,aAAa,SAAbA,UAAa,MAAO;AACxB,eAAO,OAAKzB,MAAL,GAActF,IAAIF,IAAlB,GAAyBE,GAAhC;AACD,OAFD;;AAIA;;;AAGA,UAAMgH,gBAAgB,SAAhBA,aAAgB,MAAO;AAC3B,YAAI,OAAKzB,QAAT,EAAmB;AACjBnG,gBAAMsG,GAAN,CAAUzE,IAAV,EAAgBjB,GAAhB,EAAqB,OAAKoF,IAA1B,EAAgC,OAAKG,QAArC;AACD;;AAED,eAAOvF,GAAP;AACD,OAND;;AAQA;;;AAGA,UAAMiH,aAAa,SAAbA,UAAa,MAAO;AACxB,YAAI,OAAK7B,IAAL,IAAa,OAAKlE,MAAL,KAAgB,KAAjC,EAAwC;AACtC9B,gBAAMiH,YAAN,CAAmB,OAAKjB,IAAxB;AACD;;AAED,eAAOpF,GAAP;AACD,OAND;;AAQA,UAAI0B,QAAQwF,OAAZ,EAAqB;AACnBC,gBAAQC,GAAR,CAAY,KAAKlG,MAAL,CAAYY,WAAZ,EAAZ,EAAuCuF,mBAAmBpG,IAAnB,CAAvC,EAAiEnB,IAAjE,EAAuE,KAAKD,OAA5E;AACD;;AAED,UAAM4B,UAAUC,QAAQkB,IAAR,CAAa3B,IAAb,EAAmB,KAAKC,MAAL,CAAYY,WAAZ,EAAnB,EAA8C,KAAKjC,OAAnD,EAA4DC,IAA5D,EAAkE,KAAKqB,QAAvE,EAAiF,KAAKC,OAAtF,EACbkG,IADa,CACRpH,SADQ,EAEboH,IAFa,CAERvC,WAFQ,EAGbuC,IAHa,CAGRP,UAHQ,EAIbO,IAJa,CAIRN,aAJQ,EAKbM,IALa,CAKRL,UALQ,CAAhB;;AAOAxF,cACG6F,IADH,CACQ,kBAAU;AACd,eAAKd,IAAL,CAAUvB,cAAV,EAA0B/C,MAA1B;AACA,eAAKsE,IAAL,CAAUrB,UAAV,EAAsB,IAAtB,EAA4BjD,MAA5B;AACD,OAJH,EAKGqF,KALH,CAKS,iBAAS;AACd,eAAKf,IAAL,CAAUtB,WAAV,EAAuB1F,KAAvB;AACA,eAAKgH,IAAL,CAAUrB,UAAV,EAAsB3F,KAAtB;AACD,OARH;;AAUA,aAAOiC,OAAP;AACD;;AAED;;;;;;;;;;yBAOK+F,c,EAAgBC,Y,EAAc;AACjC,WAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,KAAK9E,IAAL,CAAU,KAAK9C,IAAf,CAA/B;;AAEA,aAAO,KAAK4H,OAAL,CAAaJ,IAAb,CAAkBE,cAAlB,EAAkCC,YAAlC,CAAP;AACD;;AAED;;;;;;;2BAIMA,Y,EAAc;AAClB,WAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,KAAK9E,IAAL,CAAU,KAAK9C,IAAf,CAA/B;;AAEA,aAAO,KAAK4H,OAAL,CAAaH,KAAb,CAAmBE,YAAnB,CAAP;AACD;;;;EA5QmBE,sB;;AA+QtBlF,OAAOmF,cAAP,CAAsBlG,OAAtB,EAA+B,UAA/B,EAA2C;AACzCkF,KADyC,iBACnC;AACJ,WAAO,OAAOjB,QAAP,KAAoB,WAApB,GAAkCA,QAAlC,GAA6C5G,mBAAOA,CAAC,EAAR,CAApD;AACD;AAHwC,CAA3C;;AAMA2C,QAAQC,cAAR,GAAyB,OAAOA,cAAP,KAA0B,WAA1B,GAAwCA,cAAxC,GAAyD0D,SAAlF;;AAEA3D,QAAQkB,IAAR,GAAe,UAAC3B,IAAD,EAAOC,MAAP,EAAerB,OAAf,EAAwBC,IAAxB,EAA8BqB,QAA9B,EAAwCC,OAAxC,EAAoD;AACjE,MAAMyG,SAAS,OAAOnG,QAAQC,cAAf,KAAkC,WAAlC,GACXX,kBADW,GAEX6B,kBAFJ;;AAIA,SAAOgF,OAAO5G,IAAP,EAAaC,MAAb,EAAqBrB,OAArB,EAA8BC,IAA9B,EAAoCqB,QAApC,EAA8CC,OAA9C,CAAP;AACD,CAND;;AAQAM,QAAQwF,OAAR,GAAkB,KAAlB;AACAxF,QAAQoG,OAAR,GAAkB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,OAAvB,EAAgC,QAAhC,CAAlB;;AAEApG,QAAQoG,OAAR,CAAgBpH,OAAhB,CAAwB,kBAAU;AAChCgB,UAAQR,MAAR,IAAkB,UAASD,IAAT,EAAenB,IAAf,EAAqB;AACrC,WAAO,IAAI4B,OAAJ,CAAYT,IAAZ,EAAkBC,MAAlB,EAA0BpB,IAA1B,CAAP;AACD,GAFD;AAGD,CAJD;;AAMA8F,OAAOC,OAAP,GAAiBnE,OAAjB,C;;;;;;;;;;;;;;;;;;;ACxgBA,IAAMqG,cAAc,KAApB,C,CAA0B;;AAE1B;;;;;;;AAOA;;;;;;AAMA,IAAMC,YAAY,SAAZA,SAAY,CAAC1J,KAAD,EAAQ8G,IAAR,EAAce,GAAd;AAAA,SAAuB,EAAE7H,YAAF,EAAS8G,UAAT,EAAee,QAAf,EAAvB;AAAA,CAAlB;;AAEA,IAAM8B,cAAc,SAAdA,WAAc;AAAA,SAAM,IAAIC,IAAJ,GAAWC,OAAX,EAAN;AAAA,CAApB;;AAEA;;;;;;;;;AASA,IAAMC,cAAc,SAAdA,WAAc,CAACC,CAAD,EAAIC,CAAJ,EAAU;AAC5B,MAAIpG,SAASmG,KAAKC,CAAlB,CAD4B,CACR;;AAEpB,MAAI,CAACpG,MAAD,IAAWmG,aAAaE,MAA5B,EAAoC;AAClCrG,aAASmG,EAAEG,IAAF,CAAOF,CAAP,CAAT;AACD;;AAED,MAAI,CAACpG,MAAD,IAAWoG,aAAaC,MAA5B,EAAoC;AAClCrG,aAASoG,EAAEE,IAAF,CAAOH,CAAP,CAAT;AACD;;AAED,SAAOnG,MAAP;AACD,CAZD;;AAcA;;;;;;;AAOA,IAAMuG,qBAAqB,SAArBA,kBAAqB,CAACJ,CAAD,EAAIC,CAAJ,EAAU;AACnC,SAAO,CAAC,CAACD,EAAEK,IAAF,CAAO;AAAA,WAAQJ,EAAEI,IAAF,CAAO;AAAA,aAAQN,YAAYO,IAAZ,EAAkBC,IAAlB,CAAR;AAAA,KAAP,CAAR;AAAA,GAAP,CAAT;AACD,CAFD;;AAKA;;;;;;IAKqBvJ,K;;AAEnB;;;AAGA,iBAAYwJ,aAAZ,EAA2B;AAAA;;AACzB,SAAKA,aAAL,GAAqBA,aAArB;;AAEA;;;AAGA,SAAKC,GAAL,GAAW,IAAIC,GAAJ,EAAX;AACD;;AAED;;;;;;;;wBAIIlI,G,EAAK;AACP,UAAMmH,YAAY,KAAKc,GAAL,CAASlC,GAAT,CAAa/F,GAAb,CAAlB;;AAEA,UAAImH,SAAJ,EAAe;AACb,YAAIA,UAAU7B,GAAV,GAAgB8B,aAApB,EAAmC;AACjC,iBAAOD,UAAU1J,KAAjB;AACD,SAFD,MAEO;AACL,eAAKwK,GAAL,CAASE,MAAT,CAAgBnI,GAAhB;AACD;AACF;AACF;;AAED;;;;;;;;;wBAMIA,G,EAAKvC,K,EAAO8G,I,EAAyB;AAAA,UAAnBe,GAAmB,uEAAb4B,WAAa;;AACvC,WAAKe,GAAL,CAASpD,GAAT,CAAa7E,GAAb,EAAkBmH,UAAU1J,KAAV,EAAiB8G,IAAjB,EAAuB6C,gBAAgB9B,GAAvC,CAAlB;;AAEA,UAAI,KAAK0C,aAAL,IAAsB,CAAC,KAAKI,UAAhC,EAA4C;AAC1C,aAAKA,UAAL,GAAkBC,YAAY,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAZ,EAAmC,KAAKP,aAAxC,CAAlB;;AAEA,YAAI,KAAKI,UAAL,CAAgBI,KAApB,EAA2B;AACzB,eAAKJ,UAAL,CAAgBI,KAAhB;AACD;AACF;AACF;;AAED;;;;;;4BAGOxI,G,EAAK;AACV,WAAKiI,GAAL,CAASE,MAAT,CAAgBnI,GAAhB;AACD;;AAED;;;;;;iCAGauE,I,EAAM;AAAA;AAAA;AAAA;;AAAA;AACjB,6BAA2B,KAAK0D,GAAhC,8HAAqC;AAAA;AAAA,cAAzBjI,GAAyB;AAAA,cAApBvC,KAAoB;;AACnC,cAAIA,MAAM8G,IAAN,IAAcqD,mBAAmBrD,IAAnB,EAAyB9G,MAAM8G,IAA/B,CAAlB,EAAwD;AACtD,iBAAK4D,MAAL,CAAYnI,GAAZ;AACD;AACF;AALgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMlB;;AAED;;;;;;4BAGQ;AACN,UAAMyI,MAAMrB,aAAZ;;AADM;AAAA;AAAA;;AAAA;AAGN,8BAA2B,KAAKa,GAAhC,mIAAqC;AAAA;AAAA,cAAzBjI,GAAyB;AAAA,cAApBvC,KAAoB;;AACnC,cAAIA,MAAM6H,GAAN,GAAYmD,GAAhB,EAAqB;AACnB,iBAAKN,MAAL,CAAYnI,GAAZ;AACD;AACF;AAPK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQP;;;;;;kBA7EkBxB,K;;;;;;;;;;;;;;;;;IC1DAsI,Y;AAEnB,0BAAc;AAAA;;AACZ,SAAK4B,MAAL,GAAc,EAAd;AACD;;;;uBAEEC,S,EAAWC,Q,EAAU;AACtB,WAAKF,MAAL,CAAYC,SAAZ,IAAyB,KAAKD,MAAL,CAAYC,SAAZ,KAA0B,EAAnD;AACA,WAAKD,MAAL,CAAYC,SAAZ,EAAuBtF,IAAvB,CAA4BuF,QAA5B;;AAEA,aAAO,IAAP;AACD;;;wBAEGD,S,EAAWC,Q,EAAU;AACvB,UAAI,CAACD,SAAL,EAAgB;AACd,aAAKD,MAAL,GAAc,EAAd;AAED,OAHD,MAGO,IAAI,KAAKA,MAAL,CAAYC,SAAZ,CAAJ,EAA4B;AACjC,YAAIC,QAAJ,EAAc;AACZ,eAAKF,MAAL,CAAYC,SAAZ,IAAyB,KAAKD,MAAL,CAAYC,SAAZ,EAAuBE,MAAvB,CAA8B;AAAA,mBAAKC,MAAMF,QAAX;AAAA,WAA9B,CAAzB;AACD,SAFD,MAEO;AACL,iBAAO,KAAKF,MAAL,CAAYC,SAAZ,CAAP;AACD;AACF;;AAED,aAAO,IAAP;AACD;;;yBAEIA,S,EAAoB;AAAA,wCAANI,IAAM;AAANA,YAAM;AAAA;;AACvB,UAAI,KAAKL,MAAL,CAAYC,SAAZ,CAAJ,EAA4B;AAC1B,aAAKD,MAAL,CAAYC,SAAZ,EAAuB9I,OAAvB,CAA+B;AAAA,iBAAY+I,0BAAYG,IAAZ,CAAZ;AAAA,SAA/B;AACD;AACF;;;;;;kBAhCkBjC,Y;;;;;;;;;;;;;;ACDrB;;AAEA;;;;;AAKO,IAAMjB,gCAAY,SAAZA,SAAY,MAAO;AAC9B,MAAMmD,SAAS,EAAf;;AAEApH,SAAOC,IAAP,CAAYoH,GAAZ,EAAiBpJ,OAAjB,CAAyB,eAAO;AAC9B,QAAMpC,QAAQwL,IAAIjJ,GAAJ,CAAd;;AAEA,QAAIvC,UAAU+G,SAAd,EAAyB;AACvB,4BAAU/G,KAAV,EAAiBoC,OAAjB,CAAyB,iBAAS;AAChCmJ,eAAO3F,IAAP,CAAgB6F,mBAAmBlJ,GAAnB,CAAhB,SAA6CkJ,mBAAmBzL,KAAnB,CAA7C;AACD,OAFD;AAGD;AACF,GARD;;AAUA,SAAOuL,OAAOxF,IAAP,CAAY,GAAZ,CAAP;AACD,CAdM,C;;;;;;ACPP,gN;;;;;;ACAA,gN;;;;;;ACAA,gN;;;;;;ACAA,gN;;;;;;ACAA,gN","file":"backendless-request.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BackendlessRequest\"] = factory();\n\telse\n\t\troot[\"BackendlessRequest\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8f1eeb67aea26bd1d883","/**\n * Casts `value` as an array if it's not one.\n * Equvivalent to lodash/castArray\n */\nexport const castArray = value => {\n  return Array.isArray(value) ? value : [value]\n}\n\nexport const isObject = value => null != value && typeof value === 'object'\n\nexport const isFormData = value => {\n  return value && value.constructor && value.constructor.toString().trim().indexOf('function FormData') === 0\n}\n\nexport const isStream = value => {\n  const stream = require('stream')\n\n  return value instanceof stream.Stream\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"buffer\"\n// module id = 1\n// module chunks = 0","import Cache from './cache'\nimport EventEmitter from './event-emitter'\nimport * as qs from './qs'\nimport { castArray, isObject, isFormData, isStream } from './utils'\n\nconst CONTENT_TYPE_HEADER = 'Content-Type'\nconst CACHE_FLUSH_INTERVAL = 60000 //60 sec\n\nconst cache = new Cache(CACHE_FLUSH_INTERVAL)\n\nclass ResponseError extends Error {\n  constructor(response) {\n    super()\n\n    const error = parseError(response)\n\n    this.message = error.message || error\n    this.code = error.code\n\n    this.status = response.status\n    this.headers = response.headers\n    this.body = response.body\n  }\n}\n\nfunction parseError(res) {\n  if (res.status === 502) {\n    return 'No connection with server'\n  }\n\n  return res.body || `Status Code ${res.status} (${res.statusText})`\n}\n\nfunction parseBody(res) {\n  try {\n    return { ...res, body: JSON.parse(res.body) }\n  } catch (e) {\n    return res\n  }\n}\n\nfunction parseHeaders(headersString) {\n  const parsed = {}\n\n  if (!headersString) {\n    return parsed\n  }\n\n  headersString.split('\\n').forEach(line => {\n    const i = line.indexOf(':')\n    const key = line.substr(0, i).trim()\n    const val = line.substr(i + 1).trim()\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val\n    }\n  })\n\n  return parsed\n}\n\nconst sendXmlHttpRequest = (path, method, headers, body, encoding, timeout) => {\n  return new Promise(function sendRequest(resolve, reject) {\n    let request = new Request.XMLHttpRequest()\n\n    request.timeout = timeout\n\n    if (!encoding) {\n      request.responseType = 'arraybuffer'\n    }\n\n    request.open(method.toUpperCase(), path, true)\n\n    request.onload = function handleLoadEvent() {\n      const headers = parseHeaders(request.getAllResponseHeaders())\n      const { status, statusText } = request\n\n      const result = { status, statusText, headers }\n\n      if (encoding === 'utf8') {\n        result.body = request.response || request.responseText\n      } else if (request.response) {\n        result.body = new Uint8Array(request.response)\n      }\n\n      resolve(result)\n\n      request = null\n    }\n\n    request.onerror = function handleErrorEvent() {\n      reject(new Error('Network Error'))\n\n      request = null\n    }\n\n    request.ontimeout = function handleTimeout() {\n      reject(new Error('Connection aborted due to timeout'))\n\n      request = null\n    }\n\n    Object.keys(headers).forEach(key => {\n      request.setRequestHeader(key, headers[key])\n    })\n\n    request.send(body)\n  })\n}\n\nconst sendNodeAPIRequest = (path, method, headers, body, encoding, timeout) => {\n  return new Promise((resolve, reject) => {\n    const u = require('url').parse(path)\n    const form = isFormData(body) && body\n\n    const https = u.protocol === 'https:'\n    const options = {\n      host: u.hostname,\n      port: u.port || (https ? 443 : 80),\n      path: u.path,\n      method,\n      headers,\n      timeout,\n    }\n\n    const _send = () => {\n      const Buffer = require('buffer').Buffer\n      const httpClient = require(https ? 'https' : 'http')\n\n      const req = httpClient.request(options, res => {\n        const strings = []\n        const buffers = []\n        let bufferLength = 0\n        let body = ''\n\n        const { statusCode: status, statusMessage: statusText, headers } = res\n\n        res.on('data', chunk => {\n          if (!Buffer.isBuffer(chunk)) {\n            strings.push(chunk)\n\n          } else if (chunk.length) {\n            bufferLength += chunk.length\n            buffers.push(chunk)\n          }\n        })\n\n        res.on('end', () => {\n          if (bufferLength) {\n            body = Buffer.concat(buffers, bufferLength)\n\n            if (encoding != null) {\n              body = body.toString(encoding)\n            }\n\n          } else if (strings.length) {\n            body = strings.join()\n          }\n\n          resolve({ status, statusText, headers, body })\n        })\n\n        res.on('error', reject)\n      })\n\n      req.on('error', reject)\n\n      req.on('timeout', () => {\n        req.destroy(new Error('Connection aborted due to timeout'))\n      })\n\n      if (body) {\n        if (isStream(body)) {\n          body.pipe(req)\n          return\n        }\n\n        req.write(body)\n      }\n\n      req.end()\n    }\n\n    if (form) {\n      Object.assign(options.headers, form.getHeaders())\n\n      form.getLength(function(err, length) {\n        if (!err && !isNaN(length)) {\n          options.headers['content-length'] = length\n        }\n\n        _send()\n      })\n    } else {\n      if (body && !options.headers['content-length']) {\n        const Buffer = require('buffer').Buffer\n        options.headers['content-length'] = Buffer.byteLength(body)\n      }\n\n      _send()\n    }\n  })\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response\n  }\n\n  throw new ResponseError(response)\n}\n\nconst REQUEST_EVENT = 'request'\nconst RESPONSE_EVENT = 'response'\nconst ERROR_EVENT = 'error'\nconst DONE_EVENT = 'done'\n\nclass Request extends EventEmitter {\n\n  constructor(path, method, body) {\n    super()\n\n    this.method = method\n    this.path = path\n    this.body = body\n    this.tags = undefined\n    this.unwrap = true\n    this.cacheTTL = 0\n    this.headers = {}\n    this.queryParams = {}\n    this.encoding = 'utf8'\n    this.timeout = 0\n  }\n\n  /**\n   * Sets a header\n   *\n   * @param {String|Object} key or map of headers\n   * @param {String} [value]\n   * @returns {Request}\n   */\n  set(key, value) {\n    if (isObject(key)) {\n      for (const headerName in key) {\n        this.set(headerName, key[headerName])\n      }\n    } else if (typeof value !== 'undefined') {\n      this.headers[key] = value\n    }\n\n    return this\n  }\n\n  /**\n   * Which kind of tags this request affects.\n   * Used for cache validation.\n   * Non GET requests with defined tags, will clean all related to these tags caches\n   *\n   * @param {Array.<String>} tags\n   * @returns {Request}\n   */\n  cacheTags(...tags) {\n    this.tags = tags\n\n    return this\n  }\n\n  /**\n   * @param {Object} queryParams\n   * @returns {Request}\n   */\n  query(queryParams) {\n    Object.assign(this.queryParams, queryParams)\n\n    return this\n  }\n\n  form(form) {\n    if (form) {\n      const FormData = module.exports.FormData\n\n      if (form instanceof FormData) {\n        this.body = form\n      } else {\n        const formData = new FormData()\n\n        for (const formKey in form) {\n          if (formKey) {\n            castArray(form[formKey]).forEach(formValue => {\n              if (formValue && formValue.hasOwnProperty('value') && formValue.hasOwnProperty('options')) {\n                formData.append(formKey, formValue.value, formValue.options)\n              } else {\n                formData.append(formKey, formValue)\n              }\n            })\n          }\n        }\n\n        this.body = formData\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Should we cache or use cached result\n   *\n   * @param {Number} ttl Time to live for cached response. 15 seconds by default\n   * @returns {Request}\n   */\n  useCache(ttl = 15000) {\n    this.cacheTTL = ttl\n\n    return this\n  }\n\n  /**\n   * Reset cache if passed TRUE and tags has been specified before\n   *\n   * @param {Boolean} reset - flag to reset cache or not\n   * @returns {Request}\n   */\n  resetCache(reset) {\n    if (reset && this.tags) {\n      cache.deleteByTags(this.tags)\n    }\n\n    return this\n  }\n\n  /**\n   * Shortcut for req.set('Content-Type', value)\n   *\n   * @param {String} contentType\n   * @returns {Request}\n   */\n  type(contentType) {\n    this.set(CONTENT_TYPE_HEADER, contentType)\n\n    return this\n  }\n\n  /**\n   * Should we unwrap the response and return only body. true by default\n   * @param {Boolean} unwrap\n   * @returns {Request}\n   */\n  unwrapBody(unwrap) {\n    this.unwrap = unwrap\n\n    return this\n  }\n\n  /**\n   * set encoding to response\n   * works only for Node js\n   *\n   * @param {String} encoding\n   * @returns {Request}\n   */\n  setEncoding(encoding) {\n    this.encoding = encoding\n\n    return this\n  }\n\n  /**\n   * A number specifying request timeout in milliseconds.\n   * @param {Number} ms\n   * @returns {Request}\n   */\n  setTimeout(ms) {\n    this.timeout = ms\n\n    return this\n  }\n\n  /**\n   * Sends the requst\n   *\n   * @param {Object} body\n   * @returns {Promise}\n   */\n  send(body) {\n    this.emit(REQUEST_EVENT, this)\n\n    let path = this.path\n    const queryString = qs.stringify(this.queryParams)\n\n    if (queryString) {\n      path += '?' + queryString\n    }\n\n    if (this.cacheTTL) {\n      const cached = cache.get(path)\n\n      if (cached !== undefined) {\n        return Promise.resolve(cached)\n      }\n    }\n\n    const type = this.headers[CONTENT_TYPE_HEADER]\n\n    if (!type && isObject(body) && !isFormData(body)) {\n      this.type('application/json')\n    }\n\n    if (body) {\n      const isJSON = this.headers[CONTENT_TYPE_HEADER] === 'application/json'\n\n      body = (isJSON && typeof body !== 'string') ? JSON.stringify(body) : body\n    }\n\n    const unwrapBody = res => {\n      return this.unwrap ? res.body : res\n    }\n\n    /**\n     * Caches the response if required\n     */\n    const cacheResponse = res => {\n      if (this.cacheTTL) {\n        cache.set(path, res, this.tags, this.cacheTTL)\n      }\n\n      return res\n    }\n\n    /**\n     * Deletes all relevant to req.cacheTags keys from the cache if this request method is not GET\n     */\n    const flushCache = res => {\n      if (this.tags && this.method !== 'get') {\n        cache.deleteByTags(this.tags)\n      }\n\n      return res\n    }\n\n    if (Request.verbose) {\n      console.log(this.method.toUpperCase(), decodeURIComponent(path), body, this.headers)\n    }\n\n    const request = Request.send(path, this.method.toUpperCase(), this.headers, body, this.encoding, this.timeout)\n      .then(parseBody)\n      .then(checkStatus)\n      .then(unwrapBody)\n      .then(cacheResponse)\n      .then(flushCache)\n\n    request\n      .then(result => {\n        this.emit(RESPONSE_EVENT, result)\n        this.emit(DONE_EVENT, null, result)\n      })\n      .catch(error => {\n        this.emit(ERROR_EVENT, error)\n        this.emit(DONE_EVENT, error)\n      })\n\n    return request\n  }\n\n  /**\n   * If you are too lazy to use method 'send', don't use it and stay cool :)\n   *\n   * @param {Function} successHandler\n   * @param {Function} errorHandler\n   * @returns {Promise}\n   */\n  then(successHandler, errorHandler) {\n    this.promise = this.promise || this.send(this.body)\n\n    return this.promise.then(successHandler, errorHandler)\n  }\n\n  /**\n   * @param {Function} errorHandler\n   * @returns {Promise}\n   */\n  catch(errorHandler) {\n    this.promise = this.promise || this.send(this.body)\n\n    return this.promise.catch(errorHandler)\n  }\n}\n\nObject.defineProperty(Request, 'FormData', {\n  get() {\n    return typeof FormData !== 'undefined' ? FormData : require('form-data')\n  }\n})\n\nRequest.XMLHttpRequest = typeof XMLHttpRequest !== 'undefined' ? XMLHttpRequest : undefined\n\nRequest.send = (path, method, headers, body, encoding, timeout) => {\n  const sender = typeof Request.XMLHttpRequest !== 'undefined'\n    ? sendXmlHttpRequest\n    : sendNodeAPIRequest\n\n  return sender(path, method, headers, body, encoding, timeout)\n}\n\nRequest.verbose = false\nRequest.methods = ['get', 'post', 'put', 'patch', 'delete']\n\nRequest.methods.forEach(method => {\n  Request[method] = function(path, body) {\n    return new Request(path, method, body)\n  }\n})\n\nmodule.exports = Request\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const DEFAULT_TTL = 30000 // 30 sec\n\n/**\n * @typedef {Object} CacheItem\n * @property {*} value\n * @property {Array.<RegExp|String>} tags\n * @property {Number} ttl\n */\n\n/**\n * @param {*} value\n * @param {Array.<RegExp|String>}tags\n * @param {Number} ttl\n * @returns {CacheItem}\n */\nconst cacheItem = (value, tags, ttl) => ({ value, tags, ttl })\n\nconst currentTime = () => new Date().getTime()\n\n/**\n * Returns true if tag A matches tag B :\n *  - if they are non-strictly equal\n *  - if one of them is Regexp matching the opposite\n *\n * @param {String|RegExp} a\n * @param {String|RegExp} b\n * @returns {Boolean}\n */\nconst tagsMatches = (a, b) => {\n  let result = a == b // eslint-disable-line\n\n  if (!result && a instanceof RegExp) {\n    result = a.test(b)\n  }\n\n  if (!result && b instanceof RegExp) {\n    result = b.test(a)\n  }\n\n  return result\n}\n\n/**\n * Returns true if any of A tags matches any of B tags\n *\n * @param {Array.<String|RegExp>} a\n * @param {Array.<String|RegExp>} b\n * @returns {Boolean}\n */\nconst tagsContainMatches = (a, b) => {\n  return !!a.find(aTag => b.find(bTag => tagsMatches(aTag, bTag)))\n}\n\n\n/**\n * A Cache with TTL and optional tags for the keys\n * Makes it possible to assign multiple tags for a key and delete keys by tags\n * Optionally it starts flushing timer which cleans all outdated keys\n */\nexport default class Cache {\n\n  /**\n   * @param {Number?} flushInterval\n   */\n  constructor(flushInterval) {\n    this.flushInterval = flushInterval\n\n    /**\n     * @type {Map.<String, CacheItem>}\n     */\n    this.map = new Map()\n  }\n\n  /**\n   * @param {String} key\n   * @returns {*}\n   */\n  get(key) {\n    const cacheItem = this.map.get(key)\n\n    if (cacheItem) {\n      if (cacheItem.ttl > currentTime()) {\n        return cacheItem.value\n      } else {\n        this.map.delete(key)\n      }\n    }\n  }\n\n  /**\n   * @param {String} key\n   * @param {*} value\n   * @param {Array.<RegExp|String>=} tags\n   * @param {Number=} ttl\n   */\n  set(key, value, tags, ttl = DEFAULT_TTL) {\n    this.map.set(key, cacheItem(value, tags, currentTime() + ttl))\n\n    if (this.flushInterval && !this.flushTimer) {\n      this.flushTimer = setInterval(this.flush.bind(this), this.flushInterval)\n\n      if (this.flushTimer.unref) {\n        this.flushTimer.unref()\n      }\n    }\n  }\n\n  /**\n   * @param {String} key\n   */\n  delete(key) {\n    this.map.delete(key)\n  }\n\n  /**\n   * @param {Array.<String>} tags\n   */\n  deleteByTags(tags) {\n    for (const [key, value] of this.map) {\n      if (value.tags && tagsContainMatches(tags, value.tags)) {\n        this.delete(key)\n      }\n    }\n  }\n\n  /**\n   * Deletes all outdated keys\n   */\n  flush() {\n    const now = currentTime()\n\n    for (const [key, value] of this.map) {\n      if (value.ttl < now) {\n        this.delete(key)\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cache.js","\nexport default class EventEmitter {\n\n  constructor() {\n    this.events = {}\n  }\n\n  on(eventName, callback) {\n    this.events[eventName] = this.events[eventName] || []\n    this.events[eventName].push(callback)\n\n    return this\n  }\n\n  off(eventName, callback) {\n    if (!eventName) {\n      this.events = {}\n\n    } else if (this.events[eventName]) {\n      if (callback) {\n        this.events[eventName] = this.events[eventName].filter(c => c !== callback)\n      } else {\n        delete this.events[eventName]\n      }\n    }\n\n    return this\n  }\n\n  emit(eventName, ...args) {\n    if (this.events[eventName]) {\n      this.events[eventName].forEach(callback => callback(...args))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event-emitter.js","import { castArray } from './utils'\n\n/**\n * Produces a URL query string from a given obj by iterating through the object's \"own properties\".\n * @param {Object} obj\n * @returns {string}\n */\nexport const stringify = obj => {\n  const tokens = []\n\n  Object.keys(obj).forEach(key => {\n    const value = obj[key]\n\n    if (value !== undefined) {\n      castArray(value).forEach(value => {\n        tokens.push(`${ encodeURIComponent(key) }=${ encodeURIComponent(value) }`)\n      })\n    }\n  })\n\n  return tokens.join('&')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/qs.js","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"stream\"\n// module id = 6\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 7\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 8\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 9\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"form-data\"\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}